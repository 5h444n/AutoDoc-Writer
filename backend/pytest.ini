[pytest]
# Pytest configuration for AutoDoc-Writer backend

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Directories to search for tests
testpaths = tests

# Minimum pytest version
minversion = 6.0

# Command line options
addopts =
    # Verbose output
    -v
    # Show local variables in tracebacks
    -l
    # Show summary of all test outcomes
    -ra
    # Strict markers (fail on unknown markers)
    --strict-markers
    # Fail on warnings
    # -Werror
    # Coverage options (uncomment when ready)
    # --cov=app
    # --cov-report=html
    # --cov-report=term-missing
    # --cov-fail-under=80

# Markers for categorizing tests
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (database, external services)
    security: Security tests
    performance: Performance and load tests
    slow: Slow-running tests
    asyncio: Asynchronous tests

# Asyncio configuration
asyncio_mode = auto

# Ignore certain directories
norecursedirs = 
    .git
    .pytest_cache
    __pycache__
    fixtures
    *.egg-info
    venv
    env

# Test timeout (prevent hanging tests)
# Requires pytest-timeout
# timeout = 300

# Parallel execution settings
# Requires pytest-xdist
# -n auto  # Use all available CPU cores

# Output options
console_output_style = progress

# Logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Warnings
filterwarnings =
    # Ignore specific warnings
    ignore::DeprecationWarning:pkg_resources
    ignore::PendingDeprecationWarning
    # Treat specific warnings as errors
    # error::UserWarning
